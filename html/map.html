<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <script src="../rem.js"></script>
    <!-- <script type="text/javascript" src="//api.map.baidu.com/api?v=2.0&ak=fUtYp6pBu4pbBohc5KTDiWeDoWxN0Xc8"></script> -->
    <script type="text/javascript" src="//api.map.baidu.com/library/SearchInfoWindow/1.5/src/SearchInfoWindow_min.js"></script>
    <link rel="stylesheet" href="//api.map.baidu.com/library/SearchInfoWindow/1.5/src/SearchInfoWindow_min.css" />
    <script type="text/javascript" src="//api.map.baidu.com/api?type=webgl&v=1.0&ak=fUtYp6pBu4pbBohc5KTDiWeDoWxN0Xc8"></script>
    <link rel="stylesheet" href="../css/map.css">
    <title>北京生物医学工程学会-联系我们</title>
</head>

<body>
    <div class="box">
        <div class="banner">
            <img src="../images/index/banner.png" alt="">
        </div>
        <div id="allmap">
        </div>
    </div>
    <script type="text/javascript">
        // 百度地图API功能
        var map = new BMapGL.Map("allmap");
        var point = new BMapGL.Point(116.382, 39.950475);
        map.centerAndZoom(point, 18);

        var marker = new BMapGL.Marker(point); // 创建标注
        map.addOverlay(marker); // 将标注添加到地图中
        var opts = {
            width: 350, // 信息窗口宽度
            height: 150, // 信息窗口高度
            title: "北京生物医学工程学会", // 信息窗口标题
            message: "简介：学会是由原北京医疗器械工业公司、北京医疗器械研究所和北京医学院联合发起并经北京市社会团体登记管理机关核准注册登记的社会团体法人。"
        }
        var infoWindow = new BMapGL.InfoWindow("地址：北京市西城区新街口东街31号北京积水潭医院" + "<br>" + "电话：010-58516786" + "<br>" + "邮编：100035" + "<br>" + "简介：学会是由原北京医疗器械工业公司、北京医疗器械研究所和北京医学院联合发起并经北京市社会团体登记管理机关核准注册登记的社会团体。", opts); // 创建信息窗口对象 
        marker.addEventListener("click", function() {
            map.openInfoWindow(infoWindow, point); //开启信息窗口
        });
        //地图控件
        map.enableScrollWheelZoom(true); //开启鼠标滚轮缩放
        var scaleCtrl = new BMapGL.ScaleControl(); // 添加比例尺控件
        map.addControl(scaleCtrl);
        var zoomCtrl = new BMapGL.ZoomControl(); // 添加比例尺控件
        map.addControl(zoomCtrl);
        //3d控件
        map.enableScrollWheelZoom(true); //开启鼠标滚轮缩放
        var navi3DCtrl = new BMapGL.NavigationControl3D(); // 添加3D控件
        map.addControl(navi3DCtrl);

        //定位
        var map = new BMapGL.Map('container');
        map.centerAndZoom(new BMapGL.Point(116.382, 39.950475), 18);

        // 创建定位控件
        var locationControl = new BMapGL.LocationControl({
            // 控件的停靠位置（可选，默认左上角）
            anchor: BMAP_ANCHOR_BOTTOM_RIGHT,
            // 控件基于停靠位置的偏移量（可选）
            offset: new BMapGL.Size(40, 40)
        });
        // 将控件添加到地图上
        map.addControl(locationControl);

        // 添加定位事件
        locationControl.addEventListener("locationSuccess", function(e) {
            var address = '';
            address += e.addressComponent.province;
            address += e.addressComponent.city;
            address += e.addressComponent.district;
            address += e.addressComponent.street;
            address += e.addressComponent.streetNumber;
            alert("当前定位地址为：" + address);
        });
        locationControl.addEventListener("locationError", function(e) {
            alert(e.message);
        });
    </script>
</body>

</html>